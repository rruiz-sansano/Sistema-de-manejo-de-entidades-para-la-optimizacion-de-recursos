[gd_scene load_steps=10 format=3 uid="uid://cowr3qoojwkhx"]

[ext_resource type="Script" uid="uid://bgswnml7cnx7m" path="res://scripts/world_op.gd" id="1_0axsd"]
[ext_resource type="PackedScene" uid="uid://c8bnvvkpemrqn" path="res://prefabs/map_op.tscn" id="1_igdyy"]
[ext_resource type="PackedScene" uid="uid://vqahqmap0y3y" path="res://prefabs/test_player.tscn" id="2_3q710"]
[ext_resource type="PackedScene" uid="uid://ogyc4up1ulvv" path="res://prefabs/lance_trap.tscn" id="3_3q710"]
[ext_resource type="PackedScene" uid="uid://dqdyvi86lls4j" path="res://prefabs/torch.tscn" id="3_l551p"]
[ext_resource type="Script" uid="uid://bhf11rems8k2x" path="res://scripts/objectives.gd" id="6_mxjbv"]

[sub_resource type="Sky" id="Sky_3q710"]

[sub_resource type="Environment" id="Environment_l551p"]
sky = SubResource("Sky_3q710")

[sub_resource type="BoxShape3D" id="BoxShape3D_l551p"]
size = Vector3(4.2, 2.2741394, 4.2)

[node name="WorldOP" type="Node3D"]
script = ExtResource("1_0axsd")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_l551p")

[node name="MapOP" parent="." instance=ExtResource("1_igdyy")]

[node name="Player" parent="." instance=ExtResource("2_3q710")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.15, 0, 3.15)

[node name="torch_001" parent="Player/Neck/Eyes" index="0" instance=ExtResource("3_l551p")]
transform = Transform3D(-100, 8.742278e-06, 3.8213708e-13, 0, -4.371139e-06, 100, 8.742278e-06, 100, 4.371139e-06, 0.3866148, -0.6857996, -0.058844566)

[node name="Traps" type="Node3D" parent="."]

[node name="LanceTrap" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -2.1)
burst = 1

[node name="LanceTrap2" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 4.75, 1.05, -4.15)
burst = 3
cadence = 0.33

[node name="LanceTrap3" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -6.3)
burst = 5
cadence = 0.5
cooldown = 3.0

[node name="LanceTrap4" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 4.75, 1.05, -8.4)
burst = 2
cadence = 2.0
cooldown = 0.2

[node name="LanceTrap5" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -10.5)
burst = 3
cadence = 0.7
cooldown = 0.2

[node name="LanceTrap6" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 2.1, 0.5, -12.6)
burst = 5
cadence = 0.2

[node name="LanceTrap7" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 3.15, 0.5, -12.6)
burst = 5
cadence = 0.2

[node name="LanceTrap8" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 4.2, 0.5, -12.6)
burst = 5
cadence = 0.2

[node name="LanceTrap9" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -14.7)
burst = 4
cadence = 0.375
cooldown = 1.5

[node name="LanceTrap10" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 2.1, 2.65, -16.8)
burst = 6
cadence = 0.5
cooldown = 3.0

[node name="LanceTrap11" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 3.15, 0.5, -16.8)
burst = 4
cooldown = 2.0

[node name="LanceTrap12" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 4.2, 2.65, -16.8)
burst = 4
cadence = 0.5
cooldown = 4.0

[node name="LanceTrap13" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 4.75, 1.05, -18.9)
burst = 2
cadence = 5.8
cooldown = 0.2

[node name="LanceTrap14" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -19.95)
burst = 1
start = 2.0
cooldown = 6.0

[node name="LanceTrap15" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 4.75, 1.05, -21)
burst = 1
start = 3.0
cooldown = 6.0

[node name="LanceTrap16" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -22.05)
burst = 1
start = 4.0
cooldown = 6.0

[node name="LanceTrap17" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 1.55, 1.05, -23.1)
burst = 1
start = 5.0
cooldown = 6.0

[node name="LanceTrap18" parent="Traps" instance=ExtResource("3_3q710")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 4.75, 1.05, -24.15)
burst = 2
start = 6.0
cadence = 0.2
cooldown = 5.8

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.15, 0.67853487, -28.35)
light_color = Color(1, 1, 0, 1)

[node name="End" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.15, 0, -28.35)
collision_mask = 5

[node name="CollisionShape3D" type="CollisionShape3D" parent="End"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1473236, 0)
shape = SubResource("BoxShape3D_l551p")

[node name="Objectives" type="Node3D" parent="."]
script = ExtResource("6_mxjbv")

[node name="CanvasLayer" type="CanvasLayer" parent="Objectives"]

[node name="Control" type="Control" parent="Objectives/CanvasLayer"]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="Objective" type="Label" parent="Objectives/CanvasLayer/Control"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -195.0
offset_top = -11.5
offset_right = 195.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "Obt√©n el cofre del tesoro."
horizontal_alignment = 1
vertical_alignment = 1

[node name="Timer" type="Timer" parent="Objectives"]
unique_name_in_owner = true
wait_time = 5.0
one_shot = true
autostart = true

[connection signal="body_entered" from="End" to="." method="_on_area_3d_body_entered"]
[connection signal="timeout" from="Objectives/Timer" to="Objectives" method="_on_timer_timeout"]

[editable path="Player"]
